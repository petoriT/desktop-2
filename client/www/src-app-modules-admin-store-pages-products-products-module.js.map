{"version":3,"sources":["./src/app/modules/admin-store/pages/products/products.page.html","./src/app/modules/admin-store/pages/products/products.module.ts","./src/app/modules/admin-store/pages/products/products.page.scss","./src/app/modules/admin-store/pages/products/products.page.ts"],"names":[],"mappings":"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","file":"src-app-modules-admin-store-pages-products-products-module.js","sourcesContent":["export default \"<ion-header style=\\\"padding-top: 5px\\\" *ngIf=\\\"segment !== 'add_product' \\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button\\r\\n        size=\\\"small\\\"\\r\\n        defaultHref=\\\"/admin-store/store/dashboard\\\"\\r\\n        slot=\\\"icon-only\\\"\\r\\n        name=\\\"arrow-back\\\"\\r\\n      >\\r\\n      </ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-searchbar\\r\\n      (ionInput)=\\\"searchItems($event)\\\"\\r\\n      [debounce]=\\\"1000\\\"\\r\\n      placeholder=\\\"search {{searchPlaceholder}}...\\\"\\r\\n    ></ion-searchbar>\\r\\n    <ion-button\\r\\n      size=\\\"small\\\"\\r\\n      slot=\\\"end\\\"\\r\\n      shape=\\\"round\\\"\\r\\n      (click)=\\\"addProductSlides('add_product')\\\"\\r\\n      *ngIf=\\\"products || category\\\"\\r\\n    >\\r\\n      <ion-icon color=\\\"secondary\\\" slot=\\\"icon-only\\\" name=\\\"add\\\"></ion-icon>\\r\\n    </ion-button>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-segment\\r\\n  *ngIf=\\\"segment !== 'add_product' \\\"\\r\\n  value=\\\"inventory\\\"\\r\\n  fill=\\\"solid\\\"\\r\\n  [(ngModel)]=\\\"segment\\\"\\r\\n>\\r\\n  <ion-segment-button value=\\\"inventory\\\">\\r\\n    <ion-label>Inventory</ion-label>\\r\\n  </ion-segment-button>\\r\\n  <ion-segment-button size=\\\"small\\\" value=\\\"products\\\">\\r\\n    <ion-label>Products</ion-label>\\r\\n  </ion-segment-button>\\r\\n  <!--\\r\\n<ion-segment-button value=\\\"category\\\">\\r\\n    <ion-label>Category</ion-label>\\r\\n  </ion-segment-button>\\r\\n-->\\r\\n</ion-segment>\\r\\n\\r\\n<ion-content scroll=\\\"true\\\">\\r\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\r\\n    <ion-refresher-content></ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n  <div [ngSwitch]=\\\"segment\\\">\\r\\n    <app-category-comp\\r\\n      *ngSwitchCase=\\\"'category'\\\"\\r\\n      (shareCategory)=\\\"acceptCategory($event)\\\"\\r\\n    ></app-category-comp>\\r\\n    <app-products-comp\\r\\n      [p_products]=\\\"products$\\\"\\r\\n      *ngSwitchCase=\\\"'products'\\\"\\r\\n      (segment)=\\\"addProductSlides($event)\\\"\\r\\n    ></app-products-comp>\\r\\n    <app-add-product\\r\\n      (segment)=\\\"fromAddProduct($event)\\\"\\r\\n      *ngSwitchCase=\\\"'add_product'\\\"\\r\\n    ></app-add-product>\\r\\n    <app-inventory\\r\\n      [inventory_products]=\\\"products$\\\"\\r\\n      (segment)=\\\"addProductSlides($event)\\\"\\r\\n      #inventory\\r\\n      *ngSwitchCase=\\\"'inventory'\\\"\\r\\n    ></app-inventory>\\r\\n  </div>\\r\\n</ion-content>\\r\\n<ion-footer *ngIf=\\\"segment!=='add_product'\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-row>\\r\\n      <ion-col class=\\\"center\\\" size=\\\"4\\\">\\r\\n        <ion-button\\r\\n          size=\\\"small\\\"\\r\\n          shape=\\\"round\\\"\\r\\n          fill=\\\"clear\\\"\\r\\n          [routerLink]=\\\"['/admin-store/store/sales']\\\"\\r\\n        >\\r\\n          <img\\r\\n            style=\\\"max-width: 30%; display: block\\\"\\r\\n            src=\\\"./assets/grey divIcons made by a href=httpswww.flaticon.comauthorssrip title=sripsripa from a href=httpswww.flaticon.com title=Flaticonwww.flaticon.comadiv  1.svg\\\"\\r\\n            alt=\\\"\\\"\\r\\n          />\\r\\n\\r\\n          <sub style=\\\"color: grey; left: 5px\\\">SALES</sub>\\r\\n        </ion-button>\\r\\n      </ion-col>\\r\\n      <ion-col class=\\\"center\\\" size=\\\"4\\\">\\r\\n        <ion-fab>\\r\\n          <ion-fab-button\\r\\n            [routerLink]=\\\"['/admin-store/store/dashboard']\\\"\\r\\n            size=\\\"small\\\"\\r\\n            color=\\\"white\\\"\\r\\n          >\\r\\n            <ion-icon color=\\\"primary\\\" name=\\\"home\\\"></ion-icon>\\r\\n          </ion-fab-button>\\r\\n        </ion-fab>\\r\\n      </ion-col>\\r\\n      <ion-col class=\\\"center\\\" size=\\\"4\\\">\\r\\n        <ion-button\\r\\n          size=\\\"small\\\"\\r\\n          fill=\\\"clear\\\"\\r\\n          shape=\\\"round\\\"\\r\\n          [routerLink]=\\\"['/admin-store/store/users']\\\"\\r\\n        >\\r\\n          <img\\r\\n            style=\\\"max-width: 30%; display: block\\\"\\r\\n            src=\\\"./assets/grey users divIcons made by a href=httpswww.flaticon.comauthorssrip title=sripsripa from a href=httpswww.flaticon.com title=Flaticonwww.flaticon.comadiv 1 (1).svg\\\"\\r\\n          />\\r\\n          <sub style=\\\"color: grey; left: 5px\\\">Users</sub>\\r\\n        </ion-button>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-toolbar>\\r\\n</ion-footer>\\r\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ComponentsModule } from '../../shared/components/components.module';\nimport { ProductsComponentsModule } from './components/products-components.module';\nimport { ProductsPage } from './products.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProductsPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentsModule,\n    ProductsComponentsModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ProductsPage]\n})\nexport class ProductsPageModule {}\n","export default \"ion-card {\\n  display: flex;\\n  flex-direction: column;\\n  width: 100% !important;\\n  margin: 0 !important;\\n  height: 100%;\\n}\\n\\nion-scroll {\\n  height: 100%;\\n}\\n\\nion-item {\\n  max-height: 100%;\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\nion-segment-button {\\n  --padding-end:1px;\\n  --padding-start:1px ;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9hZG1pbi1zdG9yZS9wYWdlcy9wcm9kdWN0cy9DOlxcVXNlcnNcXE1hcnZpblxcRG9jdW1lbnRzXFxHaXRIdWJcXGFmcm9iXFxjbGllbnQvc3JjXFxhcHBcXG1vZHVsZXNcXGFkbWluLXN0b3JlXFxwYWdlc1xccHJvZHVjdHNcXHByb2R1Y3RzLnBhZ2Uuc2NzcyIsInNyYy9hcHAvbW9kdWxlcy9hZG1pbi1zdG9yZS9wYWdlcy9wcm9kdWN0cy9wcm9kdWN0cy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRyxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxzQkFBQTtFQUNBLG9CQUFBO0VBQ0EsWUFBQTtBQ0NIOztBREVBO0VBQ0UsWUFBQTtBQ0NGOztBREVBO0VBQ0UsZ0JBQUE7RUFDQSxhQUFBO0VBQ0Esc0JBQUE7QUNDRjs7QURDQTtFQUNFLGlCQUFBO0VBQ0Esb0JBQUE7QUNFRiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvYWRtaW4tc3RvcmUvcGFnZXMvcHJvZHVjdHMvcHJvZHVjdHMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWNhcmR7XG4gICBkaXNwbGF5OiBmbGV4O1xuICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XG4gICBtYXJnaW46IDAgIWltcG9ydGFudDtcbiAgIGhlaWdodDogMTAwJVxufVxuXG5pb24tc2Nyb2xsIHtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG5pb24taXRlbSB7XG4gIG1heC1oZWlnaHQ6IDEwMCU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG59XG5pb24tc2VnbWVudC1idXR0b257XG4gIC0tcGFkZGluZy1lbmQ6MXB4O1xuICAtLXBhZGRpbmctc3RhcnQ6MXB4XG59XG4iLCJpb24tY2FyZCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XG4gIG1hcmdpbjogMCAhaW1wb3J0YW50O1xuICBoZWlnaHQ6IDEwMCU7XG59XG5cbmlvbi1zY3JvbGwge1xuICBoZWlnaHQ6IDEwMCU7XG59XG5cbmlvbi1pdGVtIHtcbiAgbWF4LWhlaWdodDogMTAwJTtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbn1cblxuaW9uLXNlZ21lbnQtYnV0dG9uIHtcbiAgLS1wYWRkaW5nLWVuZDoxcHg7XG4gIC0tcGFkZGluZy1zdGFydDoxcHggO1xufSJdfQ== */\";","import { Component, OnDestroy, OnInit } from \"@angular/core\";\r\nimport { ProductFacadeService } from \"src/app/core-modules/services/products/product-facade/product-facade.service\";\r\nimport { CategoryFacadeService } from \"src/app/core-modules/services/categories/category-facade/category-facade.service\";\r\nimport { Router } from \"@angular/router\";\r\nimport { UserFacadeService } from \"src/app/core-modules/services/profile/profile-facade/profile-facade.service\";\r\nimport { distinctUntilChanged } from \"rxjs/operators\";\r\nimport { browserRefresh } from \"src/app/app.component\";\r\nimport { MenuStateService } from \"src/app/core-modules/services/menus/menu-state/menu-state.service\";\r\nimport { ToastController } from \"@ionic/angular\";\r\n@Component({\r\n  selector: \"app-products\",\r\n  templateUrl: \"./products.page.html\",\r\n  styleUrls: [\"./products.page.scss\"],\r\n})\r\nexport class ProductsPage implements OnInit {\r\n  products: boolean = false;\r\n  public segment = \"inventory\";\r\n  category: boolean = true;\r\n  updateProduct: any = {};\r\n  products$;\r\n  searchPlaceholder: string = \"Products\";\r\n\r\n  constructor(\r\n    private productFacade: ProductFacadeService,\r\n    private categoryFacade: CategoryFacadeService,\r\n    private userFacade: UserFacadeService,\r\n    private route: Router,\r\n    public menuState: MenuStateService,\r\n    public toastController: ToastController\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    //get current store\r\n    this.getProducts();\r\n\r\n    this.menuState.loggedIn();\r\n    //load categories\r\n    this.categoryFacade.loadCategories();\r\n  }\r\n\r\n  doRefresh(event) {\r\n    if (event.returnValue) {\r\n      this.getProducts();\r\n    }\r\n  }\r\n  getProducts() {\r\n    //get current store\r\n    let store = this.userFacade.getCurrentStore();\r\n    //load store profile and subscribe store products\r\n\r\n    if (Object.keys(store).length === 0) {\r\n      this.userFacade.getUser$().subscribe(\r\n        (res) => {\r\n          this.userFacade.loadStoreProfile(res.store_id);\r\n          this.productFacade.loadStoreProducts(res.store_id);\r\n          this.products$ = this.productFacade\r\n            .getCurrentStoreProducts()\r\n            .pipe(distinctUntilChanged());\r\n\r\n        },\r\n        (err) => {\r\n          console.log(err);\r\n        }\r\n      );\r\n    } else {\r\n      this.userFacade.loadStoreProfile(store._id);\r\n      this.productFacade.loadStoreProducts(store._id);\r\n      this.products$ = this.productFacade\r\n        .getCurrentStoreProducts()\r\n        .pipe(distinctUntilChanged());\r\n    }\r\n  }\r\n\r\n  fromAddProduct(data) {\r\n    this.segment = data;\r\n  }\r\n\r\n  addProductSlides(data) {\r\n    let products;\r\n    if (data === \"add_product\") {\r\n      //check lisence\r\n\r\n      this.productFacade\r\n        .getStoreProducts$()\r\n        .pipe(distinctUntilChanged())\r\n        .subscribe((res) => {\r\n          products = res;\r\n          let product_length = products.length\r\n          let store = this.userFacade.getCurrentStore();\r\n          let free_trial = store.free_trial;\r\n          let trial_end_date\r\n          let trial_number_products\r\n          if (free_trial) {\r\n            trial_end_date = free_trial.end_date;\r\n            trial_number_products = free_trial.allowed_products\r\n          }\r\n          let return_policy_length = store.return_policy.length\r\n          let lisences = store.lisence\r\n          let today_ms = Date.now()\r\n          let one_day_ms = 86400000\r\n          console.log(product_length, return_policy_length)\r\n          //check for lisence\r\n          if (product_length == 0 && return_policy_length == 0) {\r\n            this.presentToast(\r\n              \"set up your return policy first!\"\r\n            );\r\n            /*setTimeout(() => {\r\n            this.route.navigate([\"/store/return-policy\"]);\r\n          }, 1000)*/\r\n          } else {\r\n            let allow_access = false\r\n            if (lisences.length > 0) {\r\n              lisences.forEach(lisence => {\r\n                let lisence_end_date = lisence.payed_amount.end_date\r\n                let time_remaining = (lisence_end_date - today_ms) / one_day_ms\r\n\r\n                if (product_length < lisence.number_of_products && time_remaining > 0) {\r\n                  allow_access = true\r\n                }\r\n              });\r\n            } else {\r\n              let trial_time_remaining = (trial_end_date - today_ms) / one_day_ms\r\n\r\n              if (trial_time_remaining > 0 && product_length < trial_number_products) {\r\n                allow_access = true\r\n              }\r\n            }\r\n\r\n            if (allow_access) {\r\n              this.segment = data\r\n            } else {\r\n              this.presentToast(\r\n                \"Buy license or try our 15 days trial to add more products\"\r\n              );\r\n            }\r\n          }\r\n        });\r\n\r\n    } else {\r\n      this.segment = data;\r\n    }\r\n  }\r\n\r\n  searchItems(ev) {\r\n    // set val to the value of the searchbar\r\n    let val = ev.target.value;\r\n\r\n    // if the value is an empty string don't filter the items\r\n    if (val && val.trim() != \"\") {\r\n      this.productFacade.loadSearchedStoreProducts(val);\r\n    } else {\r\n      // Reset items back to all of the items\r\n      this.productFacade.loadVendorProducts();\r\n    }\r\n  }\r\n\r\n  async presentToast(msg) {\r\n    const toast = await this.toastController.create({\r\n      message: msg,\r\n      duration: 2500,\r\n    });\r\n    toast.present();\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}