<ion-header>
  <ion-toolbar>
    <ion-searchbar
      (ionInput)="searchItems($event)"
      [debounce]="1000"
      placeholder="search anything..."
    ></ion-searchbar>
  </ion-toolbar>
</ion-header>

<div *ngIf="all_p">
  <!--<div *ngFor="let category of categories$ | async; let i = index">
    <ion-chip (click)="loadCurrentCategories(category.name)">
      {{ category.name }}
    </ion-chip>
  </div>-->
  <ion-toolbar>
    <ion-title>
      <h1> {{ all_p }} </h1>
    </ion-title>
  </ion-toolbar>

</div>
<div *ngIf="current_group">
  <ion-chip (click)="loadCategoryProducts(current_group)">
    {{ current_group }}
  </ion-chip>
  <ion-chip
    (click)="loadSubCategoryProducts(selected)"
    *ngFor="let selected of selected_categgory; let i = index"
    color="primary"
  >
    {{ selected }}
  </ion-chip>
  <ion-chip
    (click)="loadProductTypeCategory(selected)"
    *ngFor="let selected of product_type_categories; let i = index"
    color="secondary"
  >
    {{ selected }}
  </ion-chip>
</div>
<!--


<div *ngFor="let product of products$ | async; let i = index">
  <ion-card *ngIf="i !== 13" [class]="count(i)">
    <div
      (click)="viewDetailPage(product)"
      style="background-image: url({{
        image.url
      }});background-position: center;background-size: cover; height: 70%;width: 100%;"
      *ngFor="let image of product.productImage"
    ></div>
    <ion-card-header
      style="height: 100%; padding: 5px; background-color: #018786"
    >
      <ion-toolbar color="primary">
        <ion-label>
          {{ product.productPrice | currency: "R" }}
        </ion-label>
        <ion-buttons slot="end">
          <ion-button
            fill="solid"
            color="primary"
            size="small"
            (click)="addToCart(product)"
            class="add_cart"
          >
            <ion-icon color="tertiary" name="cart-outline"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-card-header>
  </ion-card>
  <ion-card class="product2" *ngIf="i == 13">
    <div
      (click)="viewDetailPage(product)"
      style="background-image: url({{
        image.url
      }});background-position: center;background-size: cover; height: 50%;width: 100%;"
      *ngFor="let image of product.productImage"
    ></div>
    <ion-card-header
      style="height: 100%; padding: 5px; background-color: #018786"
    >
      <ion-toolbar color="primary">
        <ion-label>
          {{ product.productPrice | currency: "R" }}
        </ion-label>
        <ion-buttons slot="end">
          <ion-button
            fill="solid"
            color="primary"
            size="small"
            (click)="addToCart(product)"
            class="add_cart"
          >
            <ion-icon color="tertiary" name="cart-outline"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-card-header>
  </ion-card>
</div>-->

  <div class="masonry" style="padding: 5px;">
    <div style=" max-width: 50vw;" class="item" *ngFor="let product of products$ | async; let i = index" >
      <gm-feed-card>
     
          <ion-grid style="padding-left: 0px;
          padding-right: 0px;" >
            <ion-row class="ion-no-padding">
              <ion-col class="ion-no-padding" size=12>
      
                <ion-card (click)="viewDetailPage(product)"  class="product">
          
                  <ion-fab style="    top: 1vw;
                  left: 1vw;" *ngIf="product.sale" >
                    <ion-badge  class="center" color="secondary">
                  SALE
                   
                    </ion-badge>
                  
                  
                  </ion-fab>
               
        
                <div  *ngFor="let image of product.productImage; let i = index">
                  <ion-img *ngIf="i ===0 " style=" width: 100%;
                  height: 100%;"  src="{{image.url}}">
        
                  </ion-img>
               
                </div>
                 
              
         
                </ion-card>
              </ion-col>
             <ion-col size=12>
               <ion-toolbar>
                 <ion-grid class="ion-no-padding" style="padding-left: 2px;">
                   <ion-row class="ion-no-padding ion-justify-content-evenly">
                     <ion-col class="ion-no-padding" size=12>
                      <h6 style="
                            text-overflow: ellipsis;
                            overflow: hidden;
                            white-space: nowrap;
                            margin-top: 0px;
                            margin-bottom: 0px;
                            max-width: 45vw; 
                      ">
                        {{product.productName}}
                      </h6>
                     </ion-col>
             
                   </ion-row>
                   <ion-row class="ion-no-padding ion-justify-content-evenly">
                     
                    <ion-col class="ion-no-padding center" size=8>
                      <ion-label style="    text-align: justify;width: 100%;
                      ">
                        {{ product.productPrice | currency: "R" }}
                      </ion-label>
                   
                     </ion-col>
                     <ion-col class="ion-no-padding ion-justify-content-evenly center" size=4>
                      <ion-button
                      fill="solid"
                shape="round"
                      size="small"
                      (click)="addToCart(product)"
                      class="add_cart"
                      style="width:-webkit-fill-available"
                    >
                      <ion-icon style="position:absolute;" name="cart-outline"></ion-icon>
                    </ion-button>
                     </ion-col>
                   </ion-row>
                 </ion-grid>
                 
                
               </ion-toolbar>
              
             </ion-col>
            </ion-row>
          </ion-grid>
    </gm-feed-card>
    </div>
 
  </div>