

<div *ngIf=" sale_length >0">
  <div class="container"  *ngFor="let product of products$ | async; let i = index" >


    <div  >
      <ion-grid style="padding-left: 0px;
      padding-right: 0px;" >
        <ion-row class="ion-no-padding">
          <ion-col class="ion-no-padding" size=12>
  
            <ion-card (click)="viewDetailPage(product)" class="product">
              <ion-fab style="    top: 1vw;
              left: 1vw;" *ngIf="product.productPrice !==product.original_price" >
                <ion-badge *ngIf="product.thresh == 1" class="center" color="secondary">
              
                    {{calculatePerc(product.productPrice,product.original_price)}}%<br />
                    OFF
               
                </ion-badge>
                <ion-badge *ngIf="product.thresh !== 1" class="center" color="secondary">
              
                  BUY {{product.thresh}} 
                    <br/>
                    GET 
                    {{calculatePerc(product.productPrice,product.original_price)}}%<br />
                    OFF
              
                  
                </ion-badge>
              
              </ion-fab>
              <ion-fab style="    top: 1vw;
              left: 1vw;" *ngIf="product.productPrice ==product.original_price" >
                <ion-badge  class="center" color="secondary">
              SALE
               
                </ion-badge>
              
              
              </ion-fab>
    
              
              <div  *ngFor="let image of product.productImage">
    
              </div>
              <ion-img style="    width: 100%;
              height: 100%;"  src="{{product.productImage[0].url}}">
    
              </ion-img>
    
                <ion-chip  color="primary" style="    position: absolute;
                left: 0;
                text-align: center;
                right: 0;
                margin-left: auto;
                margin-right: auto;
                width: 80%;
                background-color:#018786;
                opacity: 1;
                height: 8%;
                bottom: 2px;" *ngIf="product.productPrice ==product.original_price">
               <sub style="width: 100%;color:white">
                {{product.promo_kind}}
               </sub>
                </ion-chip>
     
            </ion-card>
          </ion-col>
         <ion-col size=12>
           <ion-toolbar>
             <ion-grid class="ion-no-padding" style="padding-left: 2px;">
               <ion-row class="ion-no-padding ion-justify-content-evenly">
                 <ion-col class="ion-no-padding" size=12>
                  <h6 style="
                        text-overflow: ellipsis;
                        overflow: hidden;
                        white-space: nowrap;
                        margin-top: 0px;
                        margin-bottom: 0px;
                        max-width: 45vw; 
                  ">
                    {{product.productName}}
                  </h6>
                 </ion-col>
         
               </ion-row>
               <ion-row class="ion-no-padding ion-justify-content-evenly">
                 
                <ion-col class="ion-no-padding center" size=8>
                  <ion-label style="    text-align: justify;width: 100%;
                  ">
                    {{ product.productPrice | currency: "R" }}
                  </ion-label>
               
                 </ion-col>
                 <ion-col class="ion-no-padding ion-justify-content-evenly center" size=4>
                  <ion-button
                  fill="solid"
            shape="round"
                  size="small"
                  (click)="addToCart(product)"
                  class="add_cart"
                  style="width:-webkit-fill-available"
                >
                  <ion-icon style="position:absolute;" name="cart-outline"></ion-icon>
                </ion-button>
                 </ion-col>
               </ion-row>
             </ion-grid>
             
            
           </ion-toolbar>
          
         </ion-col>
        </ion-row>
      </ion-grid>
    </div>
      
    </div>
</div>
<div *ngIf=" sale_length == 0">
  <ion-skeleton-text  class="product" animated></ion-skeleton-text>
</div>

  <!--<div *ngIf="data">
    <ion-skeleton-text  class="product" animated></ion-skeleton-text>
  </div>-->
  
  
  <!--<div *ngFor="let product of products$ | async; let i = index">
    <ion-card *ngIf="i < more" class="product">
      <ion-fab style="left: 5%; top: 5%;">
        <ion-badge class="center" color="secondary">
          40% <br />
          off
        </ion-badge>
      </ion-fab>
      <div
        (click)="viewDetailPage(product)"
        style="background-image: url({{
          image.url
        }});background-position: center;background-size: cover; height: 70%;width: 100%;"
        *ngFor="let image of product.productImage"
      ></div>
      <ion-card-header
        style="height: 100%; padding: 5px; background-color: #f4f5f8;"
      >
        <ion-toolbar color="light">
          <ion-label>
            {{ product.productPrice | currency: "R" }}
          </ion-label>
          <ion-buttons slot="end">
            <ion-button
              fill="solid"
              color="primary"
              size="small"
              (click)="addToCart(product)"
              class="add_cart"
            >
              <ion-icon name="cart-outline"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-card-header>
    </ion-card>
  </div>
  <ion-toolbar>
    <ion-button
      expand="full"
      size="small"
      shape="round"
      fill="solid"
      color="light"
      (click)="seeMore()"
      *ngIf = "more == 4 && sale_length >10 "
    >
      Show More
  </ion-button>
  <ion-button
  *ngIf = "sale_length >10"
    expand="full"
    size="small"
    shape="round"
    fill="solid"
    color="light"
    (click)=" loadSalesProducts() "
  >
  
   see all Sales
  </ion-button>
  
  </ion-toolbar>-->
  